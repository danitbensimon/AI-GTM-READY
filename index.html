<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2B AI GTM Maturity Scorecard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Dark background with purple/blue gradient matching the image */
            background: linear-gradient(135deg, #1f143c 0%, #170d36 30%, #0d0628 100%);
            min-height: 100vh;
            padding: 2rem 1rem;
        }
        .scorecard-container {
            max-width: 900px;
            margin: 2rem auto;
            /* Slightly transparent dark container */
            background-color: rgba(30, 27, 46, 0.9);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            border-radius: 1.5rem;
            overflow: hidden;
            padding: 2rem;
            color: #e5e7eb; /* Light text */
        }
        .gradient-text {
            /* Text gradient for headings */
            background: linear-gradient(90deg, #10b981, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .result-score {
            font-size: 5rem;
            line-height: 1;
            font-weight: 900;
            background: linear-gradient(90deg, #a78bfa, #818cf8); /* Soft purple gradient */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .progress-bar-fill {
            transition: width 1s ease-in-out;
        }
        
        /* === GAMIFICATION CSS: FLICKER AND LANDING EFFECT === */
        @keyframes flicker-and-pulse {
            0% { 
                transform: scale(1);
                box-shadow: 0 0 10px rgba(168, 85, 247, 1), 0 0 4px #fff; 
            }
            25% { 
                transform: scale(1.05); /* Pulse slightly larger */
                box-shadow: 0 0 20px 6px rgba(255, 0, 255, 1), 0 0 10px #fffff1; /* Brighter magenta */
            }
            50% { 
                transform: scale(1);
                box-shadow: 0 0 12px rgba(168, 85, 247, 1), 0 0 5px #fff; 
            }
            75% { 
                transform: scale(1.05); /* Pulse slightly larger */
                box-shadow: 0 0 22px 7px rgba(255, 0, 255, 1), 0 0 11px #fffff1; /* Even brighter magenta */
            }
            100% { 
                transform: scale(1);
                box-shadow: 0 0 10px rgba(168, 85, 247, 1), 0 0 4px #fff; 
            }
        }

        /* Custom styling for the range input (slider track) */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: #374151; /* Darker track */
            border-radius: 4px;
            margin: 10px 0;
        }
        
        /* Base styling for the slider thumb (dot) */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(90deg, #6366f1, #a855f7); /* Purple thumb */
            cursor: grab; /* Indicates it can be moved */
            border: 4px solid #1f2937; /* Dark border */
            transition: all 0.3s ease; /* For smooth landing scale */
        }
        
        /* === NEW: Only apply animation if the input has the 'sparkling-dot' class === */
        .sparkling-dot::-webkit-slider-thumb {
            animation: flicker-and-pulse 1.2s infinite ease-in-out; 
        }
        
        /* Behavior while the thumb is actively dragged */
        input[type=range]::-webkit-slider-thumb:active {
            animation: none !important; /* Stop any animation while being dragged */
            cursor: grabbing; 
            transform: scale(1.1); 
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        /* Confetti/Landing Effect: Brief scale and glow when the 'sparkle-landed' class is applied */
        .sparkle-landed::-webkit-slider-thumb {
            transform: scale(1.3);
            box-shadow: 0 0 20px 5px #ff69b4, 0 0 8px #fff; 
            animation: none !important; /* Ensure it stops during the landing glow */
        }
        
        /* Confetti Particle Styling */
        .confetti-piece {
            position: fixed;
            width: 8px;
            height: 8px;
            opacity: 0;
            pointer-events: none;
            border-radius: 50%;
            transition: transform 0.5s ease-out, opacity 0.5s ease-in;
            z-index: 50; 
        }
        /* === END GAMIFICATION CSS === */


        .cta-button {
            /* Matches the ENROLL NOW button style */
            background: linear-gradient(90deg, #0ea5e9, #6366f1);
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.5);
            transition: transform 0.2s, box-shadow 0.2s;
            border-radius: 0.75rem;
        }
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.7);
        }
    </style>
</head>
<body>
    
    <!-- Confetti Canvas: Fixed layer to hold flying particles -->
    <div id="confetti-canvas" class="fixed top-0 left-0 w-full h-full pointer-events-none z-50"></div>

    <div id="app" class="scorecard-container">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-extrabold mb-2 gradient-text">
                The AI-Hype Check
            </h1>
            <p class="text-lg text-gray-400">Rate your AI-GTM across 7 key pipeline capabilities.</p>
            
            <!-- REMOVED LINK: It is now at the bottom of the quiz-area -->
        </header>

        <!-- Quiz Area -->
        <div id="quiz-area">
            <!-- Progress Bar -->
            <div class="mb-8">
                <p class="text-sm font-medium text-gray-300 mb-2">Question <span id="current-question-count">0</span> / 7</p>
                <div class="w-full bg-gray-700 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-gradient-to-r from-cyan-400 to-fuchsia-500 h-2.5 rounded-full progress-bar-fill" style="width: 0%"></div>
                </div>
            </div>

            <!-- Question Card -->
            <div id="question-card" class="bg-gray-800 p-6 sm:p-8 border border-gray-700 rounded-xl shadow-2xl transition-all duration-300">
                <!-- Question Title will be injected here -->
                <p id="question-text" class="text-xl font-semibold text-white mb-6 min-h-[60px]"></p>
                
                <!-- Slider Input Area -->
                <div id="answer-options" class="space-y-4">
                    <!-- Slider goes here -->
                </div>

                <div class="mt-8 flex justify-between">
                    <button id="previous-button" class="px-6 py-3 text-white font-semibold shadow-md hover:opacity-90 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed bg-gray-600 rounded-xl">
                        Previous Question
                    </button>
                    <button id="next-button" class="cta-button px-6 py-3 text-white font-semibold shadow-md hover:opacity-90 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                        Next Question
                    </button>
                </div>
            </div>
            
            <!-- MOVED LINK: Now located under the questions and answers/buttons -->
            <p class="text-center text-sm sm:text-base mt-8 text-cyan-400 font-semibold">
                <a href="https://abm-ai-playbook.base44.app" target="_blank" class="hover:underline transition duration-300">
                    Want to skip the check? Start generating pipeline now using AI!
                </a>
            </p>

        </div>

        <!-- Results Area (Hidden by Default) -->
        <div id="results-area" class="hidden text-center p-8 sm:p-12 bg-gray-800 rounded-xl shadow-2xl transition-opacity duration-500 opacity-0">
            <h2 class="text-3xl font-bold text-white mb-6">Your AI GTM Maturity Score</h2>
            <div class="flex items-center justify-center mb-8">
                <span id="final-score" class="result-score">--</span>
                <span class="text-3xl font-extrabold ml-2 text-gray-300">/ 100</span>
            </div>

            <p id="maturity-level" class="2xl font-bold mb-4 text-indigo-400"></p>
            
            <div id="recommendation-card" class="text-left bg-gray-900 p-6 rounded-lg border border-gray-700 mt-6">
                <h3 class="text-xl font-bold text-white mb-3 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-fuchsia-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 4.016M12 21a9.004 9.004 0 008.618-4.016M12 21a9.004 9.004 0 01-8.618-4.016M12 21v-8m0 0l-4-4m4 4l4-4" />
                    </svg>
                    Next Steps: Custom AI GTM Blueprint
                </h3>
                <p class="text-gray-400 italic mb-4">Based on your score, here is a blueprint for your next stage of AI adoption:</p>
                
                <!-- Mock AI Recommendation Placeholder -->
                <div id="ai-recommendation" class="space-y-3 text-gray-300">
                    <div class="font-semibold text-white">1. Key Focus Area:</div>
                    <ul class="list-disc list-inside text-gray-400 space-y-1 ml-4">
                        <li>Automate [Area 1].</li>
                        <li>Scale [Area 2].</li>
                        <li>Integrate [Area 3].</li>
                    </ul>
                    <p class="text-sm pt-2 text-cyan-500 font-medium">This is where the Gemini API would generate a fully personalized action plan based on your 7 scores!</p>
                </div>
            </div>

            <!-- CTA Link Updated -->
            <a href="https://abm-ai-playbook.base44.app" target="_blank" class="cta-button mt-8 px-8 py-3 text-white font-semibold shadow-lg hover:opacity-90 transition duration-300 inline-block">
                Fix Your Score: Enroll in the AI-GTM Course
            </a>
        </div>

    </div>

    <script>
        const questions = [
            { text: "1. Buying Signal Collection: Do you use AI to monitor buying signals (e.g., funding, tech stack changes) for accounts?" },
            { text: "2. Visitor De-Anonymization: Do you use AI to identify website visitors and trigger immediate, personalized outreach sequences?" },
            { text: "3. Champion Job-Change Tracking: Do you track past and current champions using AI to automatically flag them when they change jobs for re-engagement?" },
            { text: "4. Competitive Account Monitoring: Do you use AI to monitor competitor accounts for churn signals and trigger targeted campaigns?" },
            { text: "5. Scaled ABM Ownership: Has ABM execution ownership shifted from Sales Reps to Marketing/Ops due to AI's ability to execute at scale?" }, 
            { text: "6. PLG Mini-Product Generation: Do you use AI to generate interactive mini-products for Top-of-Funnel awareness and traffic?" }, 
            { 
                text: "7. Chat & Content Dependency: Is your *only* use of AI limited to content creation and simple website chatbot interactions?",
                inverted: true 
            },
        ];

        const MAX_QUESTIONS = questions.length; // 7
        const MAX_SCORE = MAX_QUESTIONS * 10; // 70

        let currentQuestionIndex = 0;
        let totalScore = 0;
        let questionScores = new Array(questions.length).fill(5); 
        // NEW: Tracks if the user has moved the slider on a specific question index
        let hasInteractedOnce = new Array(questions.length).fill(false); 

        const quizArea = document.getElementById('quiz-area');
        const resultsArea = document.getElementById('results-area');
        const questionText = document.getElementById('question-text');
        const answerOptionsDiv = document.getElementById('answer-options');
        const nextButton = document.getElementById('next-button');
        const previousButton = document.getElementById('previous-button');
        const progressBar = document.getElementById('progress-bar');
        const currentQuestionCount = document.getElementById('current-question-count');
        const confettiContainer = document.getElementById('confetti-canvas');

        let currentSlider = null;
        
        // --- CONFETTI FUNCTIONS ---

        function createConfetti(x, y, color) {
            const piece = document.createElement('div');
            piece.className = 'confetti-piece';
            piece.style.backgroundColor = color;
            piece.style.left = `${x}px`;
            piece.style.top = `${y}px`;

            const duration = Math.random() * 0.5 + 0.6;
            const angle = Math.random() * Math.PI * 2;
            const distance = Math.random() * 80 + 50; 

            const targetX = distance * Math.cos(angle);
            const targetY = distance * Math.sin(angle) - 50;

            piece.style.transition = `transform ${duration}s ease-out, opacity ${duration * 0.8}s ease-in`;
            piece.style.opacity = '1';
            
            setTimeout(() => {
                piece.style.transform = `translate(${targetX}px, ${targetY}px) rotate(${Math.random() * 720}deg)`;
                piece.style.opacity = '0';
            }, 10);

            confettiContainer.appendChild(piece);

            setTimeout(() => {
                piece.remove();
            }, duration * 1000 + 200);
        }

        function launchConfetti(x, y) {
            const colors = ['#f87171', '#34d399', '#60a5fa', '#a78bfa', '#fde047', '#ffffff']; 
            const count = 25; 

            for (let i = 0; i < count; i++) {
                const color = colors[Math.floor(Math.random() * colors.length)];
                createConfetti(x, y, color);
            }
        }
        
        // --- CORE LOGIC ---

        function handleSliderRelease(event) {
            const slider = event.target;
            const qIndex = currentQuestionIndex;
            
            // 1. Check if this is the first interaction for this question
            if (!hasInteractedOnce[qIndex]) {
                hasInteractedOnce[qIndex] = true;
                // Permanently stop the persistent animation
                slider.classList.remove('sparkling-dot'); 
            }

            // 2. Apply Pop/Glow effect (Happens on every release)
            slider.classList.add('sparkle-landed');
            setTimeout(() => {
                slider.classList.remove('sparkle-landed');
            }, 500);

            // 3. Confetti launch
            const rect = slider.getBoundingClientRect();
            const value = parseInt(slider.value, 10);
            const min = parseInt(slider.min, 10);
            const max = parseInt(slider.max, 10);

            const normalizedValue = (value - min) / (max - min);

            const trackWidth = rect.width - 24; 
            const thumbX = rect.left + 12 + (trackWidth * normalizedValue);
            const thumbY = rect.top + rect.height / 2;

            launchConfetti(thumbX, thumbY);
        }

        function calculateTotalScore() {
            totalScore = 0;
            for (let i = 0; i < MAX_QUESTIONS; i++) {
                let score = questionScores[i];
                if (questions[i].inverted) {
                    totalScore += (10 - score); 
                } else {
                    totalScore += score;
                }
            }
        }

        function renderQuestion() {
            // Store current answer before rendering next question
            if (currentSlider && currentQuestionIndex < MAX_QUESTIONS) {
                questionScores[currentQuestionIndex] = parseInt(currentSlider.value, 10);
            }
            
            if (currentQuestionIndex >= MAX_QUESTIONS) {
                showResults();
                return;
            }

            const q = questions[currentQuestionIndex];
            questionText.textContent = q.text;
            answerOptionsDiv.innerHTML = '';
            
            // Create the slider element
            const sliderWrapper = document.createElement('div');
            sliderWrapper.className = 'flex flex-col space-y-4 mt-6';

            const slider = document.createElement('input');
            slider.type = 'range';
            slider.id = 'question-slider';
            slider.min = '0';
            slider.max = '10';
            slider.step = '1';
            slider.value = questionScores[currentQuestionIndex]; 
            
            // Apply the sparkling class ONLY if the user hasn't interacted with this question yet
            if (!hasInteractedOnce[currentQuestionIndex]) {
                slider.classList.add('sparkling-dot');
            }

            // === Add gamification event listeners ===
            slider.addEventListener('mouseup', handleSliderRelease);
            slider.addEventListener('touchend', handleSliderRelease); 
            // ========================================

            const labels = document.createElement('div');
            labels.className = 'flex justify-between text-sm font-medium px-1';
            
            const lowLabel = document.createElement('span');
            lowLabel.className = 'text-cyan-400';

            const highLabel = document.createElement('span');
            highLabel.className = 'text-cyan-400';

            if (q.inverted) {
                lowLabel.textContent = '0 - Fully Integrated/Not Dependent ðŸ˜Š';
                highLabel.textContent = '10 - Fully Manual/High Dependency ðŸ˜”';
            } else {
                lowLabel.textContent = '0 - Traditional/Manual Focus ðŸ˜”';
                highLabel.textContent = '10 - Scaled AI Pipeline Impact ðŸ˜Š';
            }

            labels.appendChild(lowLabel);
            labels.appendChild(highLabel);
            
            sliderWrapper.appendChild(slider);
            sliderWrapper.appendChild(labels);
            answerOptionsDiv.appendChild(sliderWrapper);
            
            currentSlider = slider;

            // Update UI
            currentQuestionCount.textContent = currentQuestionIndex + 1;
            const progress = ((currentQuestionIndex + 1) / MAX_QUESTIONS) * 100;
            progressBar.style.width = `${progress}%`;
            
            // Manage button visibility/state
            previousButton.disabled = currentQuestionIndex === 0;
            nextButton.textContent = (currentQuestionIndex === MAX_QUESTIONS - 1) ? 'View Results' : 'Next Question';
        }

        function handleNext() {
            if (!currentSlider) return;

            // Store the score and update interaction flag (if needed)
            questionScores[currentQuestionIndex] = parseInt(currentSlider.value, 10);
            
            // Check interaction status on move, too
            if (!hasInteractedOnce[currentQuestionIndex]) {
                hasInteractedOnce[currentQuestionIndex] = true;
                currentSlider.classList.remove('sparkling-dot');
            }
            
            currentQuestionIndex++;
            calculateTotalScore();
            renderQuestion();
        }

        function handlePrevious() {
            if (currentQuestionIndex > 0) {
                // Store the current slider value first, in case the user edited it
                if (currentSlider) {
                    questionScores[currentQuestionIndex] = parseInt(currentSlider.value, 10);
                }
                
                currentQuestionIndex--;

                calculateTotalScore(); 
                renderQuestion();
            }
        }

        function calculateMaturityLevel(finalScore) {
            let level, recommendationText;

            // Raw score calculations based on max 70 points
            if (finalScore >= 67) { 
                level = "AI GTM Leader: Fully Scaled & Automated";
                recommendationText = `<div class="font-semibold text-white">1. Key Focus Area: Optimization & Expansion</div>
                    <ul class="list-disc list-inside text-gray-400 space-y-1 ml-4">
                        <li>Focus on cross-functional AI alignment; ensure product, sales, and marketing models are integrated.</li>
                        <li>Hyper-optimize sequences with A/B/C testing on AI-generated content and delivery timing.</li>
                        <li>Expand signal coverage globally and across niche competitive markets.</li>
                    </ul>`;
            } else if (finalScore >= 34) { 
                level = "Intermediate AI User: Focused on Productivity & Scale";
                recommendationText = `<div class="font-semibold text-white">1. Key Focus Area: Signal Integration & Targeting</div>
                    <ul class="list-disc list-inside text-gray-400 space-y-1 ml-4">
                        <li>Automate the Loop: Start moving from manually reviewed signals to automated sequence enrollment.</li>
                        <li>Invest in Intent/Signal Tools: Implement advanced buying signal and job-change tracking (Q1, Q3).</li>
                        <li>Leverage PLG: Explore building a mini-product or calculator (Q6) to generate pipeline-qualified leads.</li>
                    </ul>`;
            } else { 
                level = "Foundational AI User: Primarily Manual/Content";
                recommendationText = `<div class="font-semibold text-white">1. Key Focus Area: Foundational Strategy</div>
                    <ul class="list-disc list-inside text-gray-400 space-y-1 ml-4">
                        <li>Eliminate Dependencies: Immediately work to reduce reliance on content-only and chat AI (Q7).</li>
                        <li>Implement PLG Mini-Products: Start building simple, viral calculators/tools to generate traffic and awareness (Q6).</li>
                        <li>Pilot De-Anonymization: Launch a pilot project to identify website visitors for rep follow-up (Q2).</li>
                    </ul>`;
            }

            return { level, recommendationText };
        }


        function showResults() {
            quizArea.classList.add('hidden');
            resultsArea.classList.remove('hidden');
            setTimeout(() => resultsArea.classList.remove('opacity-0'), 10);

            const finalScore = Math.round((totalScore / MAX_SCORE) * 100);
            
            document.getElementById('final-score').textContent = finalScore;

            const { level, recommendationText } = calculateMaturityLevel(finalScore);
            document.getElementById('maturity-level').textContent = level;
            document.getElementById('ai-recommendation').innerHTML = recommendationText;
        }

        // Initialize
        nextButton.addEventListener('click', handleNext);
        previousButton.addEventListener('click', handlePrevious);
        window.onload = renderQuestion;
    </script>
</body>
</html>
